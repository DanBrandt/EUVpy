import pytest
from EUVpy.NEUVAC import neuvac
from EUVpy.tools import processIndices
#-----------------------------------------------------------------------------------------------------------------------

#-----------------------------------------------------------------------------------------------------------------------

#-----------------------------------------------------------------------------------------------------------------------

#-----------------------------------------------------------------------------------------------------------------------
def test_config():
    # Get some F10.7 for the entirety of 2022
    f107times, f107, f107a, f107b = processIndices.getCLSF107('2022-01-01', '2023-01-01', truncate=False)

    # Generate the NEUVAC irradiance but output them to a file that can be used by GITM
    out = neuvac.gitmNEUVAC(f107times, f107, f107b)

    # Verify that the contents of the file are sensible:
    first_line_true = (' 2022  1  1  0  0  0 5.61856e-11 2.06693e-09 2.64206e-07 1.17856e-05 3.69159e-05 1.31306e-05 '
                       '4.87022e-05 0.000223907 8.22271e-05 0.000469256 0.000298221 5.73005e-05 3.96137e-05 0.000114362 '
                       '0.0004776 3.1267e-06 0.000136962 4.48117e-05 7.88544e-05 4.0436e-05 1.54913e-05 4.82561e-05 '
                       '4.53373e-05 2.3917e-05 5.02657e-05 2.06312e-05 2.46136e-05 5.33008e-05 1.69474e-05 1.63157e-05 '
                       '1.07752e-05 1.86541e-05 1.17213e-05 1.32457e-05 1.38946e-05 5.22605e-05 0.000100526 0.000167108 '
                       '0.000136027 0.00013581 5.13482e-05 8.26491e-05 5.86648e-05 6.7833e-05 4.46852e-05 6.38174e-05 '
                       '0.00021721 0.00668519 0.000515813 0.000124214 0.000401659 0.000210659 0.000244311 0.000346324 '
                       '0.000598522 0.000858594 0.0012091 0.00219549 0.00361623\n')
    with open(out, 'r') as outfile:
        contents = outfile.readlines()
    actual_first_line = contents[1]
    assert(actual_first_line == first_line_true)

